---
const {
  image,
  title,
  urlDemo,
  urlCode,
  text,
  skills = [],
  index,
} = Astro.props;
const modalId = `modal-${index}`;
---

<div
  class="card bg-base-100 shadow-sm w-full h-full relative overflow-hidden mb-2"
>
  <!-- immagine come sfondo -->
  <img
    src={image}
    alt={title}
    class="absolute inset-0 w-full h-full object-cover opacity-80"
  />

  <!-- overlay scuro -->
  <div class="absolute inset-0 bg-brazil-blue/80 xl:bg-brazil-blue/60"></div>

  <!-- contenuto -->
  <div class="card-body relative z-10 flex flex-col justify-between">
    <!-- Titolo -->
    <h2 class="text-white xl:text-xl 2xl:text-2xl font-extrabold mb-2">
      {title}
    </h2>

    <!-- Testo SOLO su mobile -->
    <div class="block md:hidden">
      <div class="flex flex-wrap gap-1 mb-3">
        {
          skills.map((skill: string) => (
            <span class="badge badge-outline p-2 text-white border-white">
              {skill}
            </span>
          ))
        }
      </div>
      <p class="text-white text-base">{text}</p>
    </div>

    <!-- Bottoni -->
    <div class="card-actions justify-end mt-auto">
      <a
        href={urlDemo}
        target="_blank"
        class="btn btn-sm bg-brazil-yellow hover:bg-brazil-green text-black hover:text-white border-0"
      >
        Demo
      </a>

      <!-- Details visibile solo su md+ -->
      <label
        for={modalId}
        class="hidden md:inline-flex btn btn-sm bg-brazil-yellow hover:bg-brazil-green text-black hover:text-white border-0"
      >
        Details
      </label>

      <a
        href={urlCode}
        target="_blank"
        class="btn btn-sm bg-brazil-yellow hover:bg-brazil-green text-black hover:text-white border-0"
      >
        Code
      </a>
    </div>
  </div>

  <!-- Modal -->
  <input type="checkbox" id={modalId} class="modal-toggle" />
  <div class="modal">
    <div
      class="modal-box relative bg-brazil-blue text-white max-w-2xl"
      style="background-image: url({image}); background-size: cover; background-position: center;"
    >
      <!-- overlay scuro -->
      <div class="absolute inset-0 bg-brazil-blue/80"></div>

      <!-- contenuto -->
      <div class="relative z-10">
        <label
          for={modalId}
          class="btn btn-sm btn-circle absolute right-2 top-2 bg-brazil-yellow text-black hover:bg-brazil-green hover:text-white border-0"
        >
          âœ•
        </label>

        <h3 class="text-lg font-bold mb-2">{title}</h3>

        <!-- Skills -->
        <div class="flex flex-wrap gap-1 mb-4">
          {
            skills.map((skill: string) => (
              <span class="badge badge-outline p-2 text-white border-white">
                {skill}
              </span>
            ))
          }
        </div>

        <!-- Testo -->
        <p class="mb-4">{text}</p>

        <!-- Bottoni -->
        <div class="flex gap-2 justify-end">
          <a
            href={urlDemo}
            target="_blank"
            class="btn btn-sm bg-brazil-yellow hover:bg-brazil-green text-black hover:text-white border-0"
          >
            Demo
          </a>
          <a
            href={urlCode}
            target="_blank"
            class="btn btn-sm bg-brazil-yellow hover:bg-brazil-green text-black hover:text-white border-0"
          >
            Code
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
